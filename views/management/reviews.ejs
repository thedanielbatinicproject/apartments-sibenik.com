<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="/stylesheets/management/reviews.css">
    <link rel="stylesheet" href="/stylesheets/management/reviews-mobile.css">
    <link rel="stylesheet" href="/stylesheets/management/reviews-responsive.css">
</head>
<body>
    <div class="reviews-container">
        <!-- Page Header -->
        <div class="page-header">
            <div>
                <h1 style="color: #fff; margin: 0; font-size: 2rem;">Reviews Management</h1>
                <p style="color: rgba(255, 255, 255, 0.7); margin: 0.5rem 0 0 0;">Add, edit or remove reviews from website</p>
            </div>
            <div style="display: flex; gap: 1rem; align-items: center;">
                <button class="add-review-btn" onclick="openAddModal()">
                    <span>+</span>
                    Add New Review
                </button>
                <a href="/management" class="return-btn">
                    <span>‚Üê</span>
                    Return to Dashboard
                </a>
            </div>
        </div>

        <!-- Unit Selection Tabs -->
        <div class="unit-tabs">
            <button class="unit-tab active" onclick="switchUnit(1)" data-unit="1">
                Apartment with Garden (Unit 1)
            </button>
            <button class="unit-tab" onclick="switchUnit(2)" data-unit="2">
                Studio Apartment (Unit 2)
            </button>
        </div>

        <!-- Reviews Grid -->
        <div class="reviews-grid" id="reviewsGrid">
            <!-- Reviews will be loaded here dynamically -->
        </div>

        <!-- Load More Button -->
        <button class="load-more-btn" id="loadMoreBtn" onclick="loadMoreReviews()" style="display: none;">
            Load More Reviews
        </button>
    </div>

    <!-- Add/Edit Review Modal -->
    <div id="reviewModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle" style="color: #fff; margin-bottom: 2rem;">Add New Review</h2>
            
            <form id="reviewForm" enctype="multipart/form-data">
                <input type="hidden" id="reviewId" name="reviewId">
                
                <div class="form-group">
                    <label for="unitId">Unit</label>
                    <select id="unitId" name="unitId" required>
                        <option value="">Select Unit</option>
                        <option value="1">Apartment with Garden (Unit 1)</option>
                        <option value="2">Studio Apartment (Unit 2)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="platform">Platform</label>
                    <select id="platform" name="platform" required>
                        <option value="">Select Platform</option>
                        <option value="airbnb">Airbnb</option>
                        <option value="booking">Booking.com</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="guestName">Guest Name</label>
                    <input type="text" id="guestName" name="guestName" required>
                </div>

                <div class="form-group">
                    <label for="avatarFile">Guest Avatar (Image)</label>
                    <div class="file-upload">
                        <input type="file" id="avatarFile" name="avatarFile" accept="image/*">
                        <label for="avatarFile" class="file-upload-label">
                            Choose image file or drag and drop
                        </label>
                    </div>
                    <div class="file-preview" id="filePreview">
                        <svg class="file-preview-icon" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/>
                        </svg>
                        <div class="file-preview-info">
                            <div class="file-preview-name" id="filePreviewName"></div>
                            <div class="file-preview-size" id="filePreviewSize"></div>
                        </div>
                        <button type="button" class="file-preview-remove" id="filePreviewRemove">
                            ‚úï
                        </button>
                    </div>
                    <div class="avatar-actions" style="margin-top: 0.5rem; display: none;" id="avatarActions">
                        <button type="button" id="removeAvatarBtn" class="remove-avatar-btn">
                            üóëÔ∏è Remove Current Avatar
                        </button>
                        <input type="hidden" id="removeAvatar" name="removeAvatar" value="false">
                    </div>
                    <small style="color: rgba(255,255,255,0.6); margin-top: 0.5rem; display: block;">
                        Leave empty to use default avatar. Supported: JPG, PNG, WebP
                    </small>
                </div>

                <div class="form-group">
                    <label for="reviewDate">Review Date</label>
                    <input type="date" id="reviewDate" name="reviewDate" required>
                </div>

                <div class="form-group">
                    <label for="rating">Rating</label>
                    <select id="rating" name="rating" required>
                        <option value="">Select Rating</option>
                        <option value="1">1 Star</option>
                        <option value="2">2 Stars</option>
                        <option value="3">3 Stars</option>
                        <option value="4">4 Stars</option>
                        <option value="5">5 Stars</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="comment">Review Comment</label>
                    <textarea id="comment" name="comment" placeholder="Enter the review comment..." required></textarea>
                </div>

                <div class="form-group">
                    <label for="upvotes">Upvotes Count</label>
                    <input type="number" id="upvotes" name="upvotes" min="0" value="0" placeholder="Number of upvotes">
                </div>

                <div class="form-group">
                    <label>Verified Guest</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="isVerified" name="isVerified" checked>
                        <label for="isVerified">Mark as verified guest</label>
                    </div>
                </div>

                <button type="submit" class="btn-submit">
                    <span id="submitText">Add Review</span>
                </button>
            </form>
        </div>
    </div>

    <script src="/javascripts/reviews-management.js"></script>
</body>
</html>